<p-toast key="compacct-toast" baseZIndex="99999"></p-toast>
<p-toast position="center" key="OrderNo" styleClass="custom-orderno-toast" (onClose)="onReject()" [modal]="true" [autoZIndex]="true">
    <ng-template let-message pTemplate="message">
        <div class="row" style="text-align: center">
            <i class="pi pi-id-card" style="font-size: 3em"></i>
            <!-- <h3>{{ message.summary }}</h3>
      <p>{{ message.detail }}</p> -->
            <form>
                <div class="form-group">
                    <div class='col-sm-12'>
                        <label class="control-label">Order No</label>
                        <input class="form-control" name="oRDER_nO" #oRDER_nO="ngModel" id='OrderNoCheck' oninput="event.target.value = event.target.value.replace(/[^0-9]/g, '');" (keypress)="onKeypressEvent($event)" ngModelChange="pastefunction()" (keydown)="onKeydownMain3($event, 'OrderNoCheck')" [(ngModel)]="ClickedOnlineLedger['Order_No']" placeholder="Order No">
                    </div>
                    <div class='col-sm-12' *ngIf="keypressmsg && !ClickedOnlineLedger['Order_No']">
                    <p style="color:red">{{keypressmsg}}</p>
                    </div>
                    <div class='col-sm-12'>
                        <label class="control-label">Order Date</label>
                        <ejs-datepicker [format]="'dd/MMM/yyyy'" id='Customer_DOB' name="Customer_DOB" #Customer_DOB="ngModel" [(ngModel)]="ClickedOnlineLedger['Order_Date']" placeholder="dd/MMM/yyyy">
                        </ejs-datepicker>
                    </div>
                </div>
            </form>
        </div>
        <div class="row text-center" style="margin-top: 2em;">
            <button type="button" pButton (click)="onConfirm()" label="Yes" class="ui-button-success"></button>
            <button type="button" pButton (click)="onReject()" label="No" class="ui-button-secondary"></button>
        </div>
    </ng-template>
</p-toast>
<p-toast position="center" key="OrderNoZ" styleClass="custom-orderno-toast" (onClose)="onReject()" [modal]="true" [autoZIndex]="true">
    <ng-template let-message pTemplate="message">
        <div class="row" style="text-align: center">
            <i class="pi pi-id-card" style="font-size: 3em"></i>
            <!-- <h3>{{ message.summary }}</h3>
      <p>{{ message.detail }}</p> -->
            <form>
                <div class="form-group">
                    <div class='col-sm-12'>
                        <label class="control-label">Order No</label>
                        <input class="form-control" name="oRDER_nO" #oRDER_nO="ngModel" id='OrderNoCheck' oninput="event.target.value = event.target.value.replace(/[^0-9]/g, '');" (keypress)="onKeypressEvent($event)" (keydown)="onKeydownMain3($event, 'OrderNoCheck')" [(ngModel)]="ClickedOnlineLedger['Order_No']" placeholder="Order No">
                    </div>
                    <div class='col-sm-12' *ngIf="keypressmsg && !ClickedOnlineLedger['Order_No']">
                        <p style="color:red">{{keypressmsg}}</p>
                    </div>
                    <div class='col-sm-12'>
                        <label class="control-label">Order Date</label>
                        <ejs-datepicker [format]="'dd/MMM/yyyy'" id='Customer_DOB' name="Customer_DOB" #Customer_DOB="ngModel" [(ngModel)]="ClickedOnlineLedger['Order_Date']" placeholder="dd/MMM/yyyy">
                        </ejs-datepicker>
                    </div>
                </div>
            </form>
        </div>
        <div class="row text-center" style="margin-top: 2em;">
            <button type="button" pButton (click)="onConfirm()" label="Yes" class="ui-button-success"></button>
            <button type="button" pButton (click)="onReject()" label="No" class="ui-button-secondary"></button>
        </div>
    </ng-template>
</p-toast>

<div class="row pos-row" *ngIf='UpperDataList.length'>
    <div class="col-lg-3 col-xs-6">
        <div class="small-box bg-aqua">
            <div class="inner">
                <h3>{{UpperDataList[0].Box_Value}}</h3>
                <p>{{UpperDataList[0].Box_Text }}</p>
            </div>
            <div class="icon">
                <i class="fa fa-qrcode"></i>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-xs-6">
        <div class="small-box bg-green">
            <div class="inner">
                <h3>{{UpperDataList[1].Box_Value}}</h3>
                <p>{{UpperDataList[1].Box_Text }}</p>
            </div>
            <div class="icon">
                <i class="fa fa-book"></i>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-xs-6">
        <div class="small-box bg-yellow">
            <div class="inner">
                <h3>{{UpperDataList[2].Box_Value}}</h3>
                <p>{{UpperDataList[2].Box_Text }}</p>
            </div>
            <div class="icon">
                <i class="ion ion-stats-bars"></i>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-xs-6">
        <div class="small-box bg-red">
            <div class="inner">
                <h3>{{UpperDataList[3].Box_Value}}</h3>
                <p>{{UpperDataList[3].Box_Text }}</p>
            </div>
            <div class="icon">
                <i class="fa fa-calculator"></i>
            </div>
        </div>
    </div>
</div>
<div class="row" style="padding:1em;">
    <div class="col-sm-6">
        <div class="row">
            <!-- <div class="col-sm-3">
        <button class="pos-btn pos-btn-sep shopping" (click)='ShowOnlineDelOrderNo()'>TAKE AWAY</button>
      </div>
      <div class="col-sm-3">
        <button class="pos-btn pos-btn-sep cutlery"  (click)='ShowOnlineDelOrderNo()'>CUSTOM ORDER</button>
      </div>
      <div class="col-sm-3">
        <button class="pos-btn pos-btn-sep shopping">TAKE AWAY</button>
      </div>
      <div class="col-sm-3">
        <button class="pos-btn pos-btn-sep shopping">TAKE AWAY</button>
      </div> -->
            <!-- <div class="col-sm-6">
                <div class="info-box btn-foursquare" (click)='ShowCustomerDetailsPopUp("./K4C_Outlet_Sale_Bill")'>
                    <span class="info-box-icon"><i class="fa fa-shopping-bag"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" style="font-size: 1.2em;">TAKE AWAY</span>

                    </div>
                </div>

            </div> -->
            <div class="col-sm-6">
                <div class="info-box AutoB" (click)='ShowCustomerDetailsPopUp("./Outlet_Sale_Bill_WithOut_batch_Select")'>
                    <span class="info-box-icon"><i class="fa fa-shopping-bag" style="color: white;"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" style="font-size: 1.2em; color: white;">TAKE AWAY (Auto Batch)</span>

                    </div>
                </div>

            </div>
            <div class="col-sm-6">
                <div class="info-box bg-orange" (click)='ShowCustomerDetailsadvPopUp("./K4C_Outlet_Advance_Order")'>
                    <span class="info-box-icon"><i class="fa fa-cutlery"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" style="font-size: 1.2em;">CUSTOM ORDER</span>

                    </div>
                </div>

            </div>
            
            <div class=" col-sm-6">
                <div class="info-box bg-purple" (click)='RedirectTo("bill")'>
                    <span class="info-box-icon"><i class="fa fa-search"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" style="font-size: 1.2em;">Browse Bill</span>

                    </div>
                </div>

            </div>
            <div class=" col-sm-6">
                <div class="info-box bg-maroon" (click)='RedirectTo("order")'>
                    <span class="info-box-icon"><i class="fa fa-search"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" style="font-size: 1.2em;">Browse Order</span>

                    </div>
                </div>

            </div>
            
            <div class=" col-sm-6">
                <div class="info-box bg-red" (click)='RedirectTo("requisition")'>
                    <span class="info-box-icon"><i class="fa fa-file-text-o"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" style="font-size: 1.2em;">Indent</span>

                    </div>
                </div>

            </div>
            <div class=" col-sm-6">
                <div class="info-box bg-olive" (click)='RedirectTo("acceptchallan")'>
                    <span class="info-box-icon"><i class="fa fa-check-square-o"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" style="font-size: 1.2em;">Accept Challan</span>

                    </div>
                </div>

            </div>

            <div class="col-sm-6" *ngFor='let obj of OnlineLedgerList'>
                <div class="info-box bg-light-blue-gradient" (click)='ShowOnlineDelOrderNo(obj)'>
                    <span class="info-box-icon"><i class="fa fa-comments-o"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" style="font-size: 1.2em;">{{obj.Ledger_Name}}</span>

                    </div>
                </div>

            </div>

            <div class=" col-sm-6">
                <div class="info-box bg-fuchsia-active" (click)='RedirectTo("factory")'>
                    <span class="info-box-icon"><i class="fa fa-truck"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" style="font-size: 1.2em;">Factory Return Finished</span>

                    </div>
                </div>

            </div>
            <div class=" col-sm-6">
                <div class="info-box RTFstore" (click)='RedirectTo("factorystore")'>
                    <span class="info-box-icon"><i class="fa fa-truck" style="color: white;"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" style="font-size: 1.2em; color: white;">Factory Return Store</span>

                    </div>
                </div>

            </div>
            <!-- <div class=" col-sm-6">
        <div class="info-box bg-olive" (click)='RedirectTo("Browsefactory")'>
          <span class="info-box-icon"><i class="fa fa-search"></i></span>
          <div class="info-box-content">
            <span class="info-box-text"  style="font-size: 1.2em;">Browse Factory Return</span>

          </div>
        </div>

      </div> -->

            
            <div class=" col-sm-6">
                <div class="info-box bg-aqua" (click)='RedirectTo("outletstocktrancfer")'>
                    <span class="info-box-icon"><i class="fa fa-exchange"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" style="font-size: 1.2em;">Stock Transfer</span>

                    </div>
                </div>

            </div>
            <div class=" col-sm-6">
                <div class="info-box autobatch" (click)='RedirectTo("outletstocktrancferautobatch")'>
                    <span class="info-box-icon"><i class="fa fa-exchange" style="color: white;"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" style="font-size: 1em; color: white;">Stock Transfer (Auto Batch)</span>

                    </div>
                </div>

            </div>
            <div class=" col-sm-6">
                <div class="info-box bg-yellow" (click)='RedirectTo("viewstock")'>
                    <span class="info-box-icon"><i class="fa fa-pencil-square-o"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" style="font-size: 1.2em;">Report</span>

                    </div>
                </div>

            </div>

            <div class=" col-sm-6">
                <div class="info-box Bank" (click)='RedirectTo("bankcollection")'>
                    <span class="info-box-icon"><i class="fa fa-university" style="color: white;"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" style="font-size: 1.2em; color: white;">Bank Collection</span>

                    </div>
                </div>

            </div>

            <div class=" col-sm-6">
                <div class="info-box DEP" (click)='RedirectTo("dayendprocess")'>
                    <span class="info-box-icon"><i class="fa fa-hourglass-end" style="color: white;"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" style="font-size: 1.2em; color: white;">Day End Process</span>

                    </div>
                </div>

            </div>


        </div>
    </div>
    <div class="col-sm-6">
        <div class="row">
            <div class="col-sm-12">
                <div class="box box-success">
                    <div class="box-header with-border">
                        <h3 class="box-title" style="color: #a2a2a2;font-weight: bolder;">TILL DATE PENDING DELIVER</h3>
                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool delivery" data-widget="collapse">
                <i class="fa fa-minus"></i>
              </button>
                        </div>
                    </div>
                    <div class="box-body">

                        <div class="table-responsive table-id">
                            <p-table [value]="OutForDeliveryDataList" [paginator]="OutForDeliveryDataList.length ? true : false" [rows]="10" [rowHover]="true" [autoLayout]="true" sortMode="multiple" [rowsPerPageOptions]="[10,20,30]" [globalFilterFields]="['Adv_Order_No','Del_Date_Time','Customer_Name','Costomer_Mobile','Total_Amount','Advance','Net_Due']"
                                [rowHover]="true" #dt3>
                                <ng-template pTemplate="caption">
                                    <div class="row">
                                        <div class="col-sm-3 pull-right" style="text-align: right">
                                            <input type="text" pInputText size="50" placeholder="Search" (input)="dt3.filterGlobal($event.target.value, 'contains')" class="searchInput form-control">
                                        </div>
                                    </div>

                                </ng-template>
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th>Order No</th>
                                        <th>Delivery Date&Time</th>
                                        <th>Customer Name</th>
                                        <th>Mobile</th>
                                        <th>Total Amount</th>
                                        <th>Adv</th>
                                        <th>Due</th>
                                        <!-- <th>Action</th> -->


                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-col>
                                    <tr>
                                        <td><a class="btn btn-sm" (click)='RedrectEdit(col,"ordertobill")'>{{col.Adv_Order_No}}</a> <br>
                                            <button type="button" (click)="EditDelivery(col)" class="btn btn-primary">
                                            <i class="fa fa-pencil-square-o"></i>&nbsp;  Edit Delivery
                                            </button>
                                        </td>
                                        <td>{{col.Del_Date | date: "dd/MMM/yyyy"}} - {{col.Del_Date_Time}}</td>
                                        <td>{{col.Customer_Name}}</td>
                                        <td>{{col.Costomer_Mobile}}</td>
                                        <td><b>{{col.Total_Amount}}</b></td>
                                        <td class="text-success">{{col.Advance}}</td>
                                        <td class="text-danger">{{col.Net_Due}}</td>
                                        <!-- <td>
                                            <button type="button" (click)="BillWithoutStock(col)" class="btn btn-primary">
                                             <i class="fa fa-file-text-o"></i>&nbsp;  Bill Without Stock
                                            </button>
                                        </td> -->

                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="paginatorright" let-state>
                                    Showing {{state.first+1}} of {{(state.first+1) + state.rows}} of {{state.totalRecords}}
                                </ng-template>
                            </p-table>
                        </div>
                    </div>
                    <div class="box-footer">
                        Total : {{OutForDeliveryDataList.length}}
                    </div>
                </div>
            </div>
            <!-- Collapse Button<div class="col-sm-12">
                <div class="box box-primary">
                    <div class="box-header with-border">
                        <h3 class="box-title" style="color: #a2a2a2;font-weight: bolder;">HOLD BILL</h3>
                        <div class="box-tools pull-right">
                             Collapse Button 
                            <button type="button" class="btn btn-box-tool otherdata" data-widget="collapse">
                <i class="fa fa-minus"></i>
              </button>
                        </div>
                         /.box-tools 
                    </div>
                    <div class="box-body">
                        <div class="table-responsive table-id">
                            <p-table [value]="HoldBillDataList" [paginator]="HoldBillDataList.length ? true : false" [rows]="10" [rowHover]="true" [autoLayout]="true" sortMode="multiple" [rowsPerPageOptions]="[10,20,30]" [globalFilterFields]="['Bill_No','Date','Customer_Name','Net_Amount']"
                                [rowHover]="true" #dt>
                                <ng-template pTemplate="caption">
                                    <div class="row">
                                        <div class="col-sm-3 pull-right" style="text-align: right">
                                            <input type="text" pInputText size="50" placeholder="Search" (input)="dt.filterGlobal($event.target.value, 'contains')" class="searchInput form-control">
                                        </div>
                                    </div>

                                </ng-template>
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th>Bill No</th>
                                        <th>Date</th>
                                        <th>Customer Name</th>
                                        <th>Bill Amount</th>


                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-col>
                                    <tr>
                                        <td><a class="btn btn-sm" (click)='RedrectEdit(col,"holdbill")'>{{col.Bill_No}}</a></td>
                                        <td>{{col.Date}}</td>
                                        <td>{{col.Customer_Name}}</td>
                                        <td>{{col.Net_Amount}}</td>

                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="paginatorright" let-state>
                                    Showing {{state.first+1}} of {{(state.first+1) + state.rows}} of {{state.totalRecords}}
                                </ng-template>
                            </p-table>
                        </div>
                    </div>
                    <div class="box-footer">
                        Total : {{HoldBillDataList.length}}
                    </div>
                </div>
            </div> /.box-tools-->
            <div class="col-sm-12">
                <div class="box box-primary">
                    <div class="box-header with-border">
                        <h3 class="box-title" style="color: #a2a2a2;font-weight: bolder;">HOLD CUSTOM ORDER</h3>
                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool otherdata" data-widget="collapse">
                <i class="fa fa-minus"></i>
              </button>
                        </div>
                    </div>
                    <div class="box-body">
                        <div class="table-responsive table-id">
                            <p-table [value]="HoldCustomOrderDataList" [paginator]="HoldCustomOrderDataList.length ? true : false" [rows]="10" [rowHover]="true" [autoLayout]="true" sortMode="multiple" [rowsPerPageOptions]="[10,20,30]" [globalFilterFields]="['Adv_Order_No','Date','Customer_Name','Total_Amount']"
                                [rowHover]="true" #dt2>
                                <ng-template pTemplate="caption">
                                    <div class="row">
                                        <div class="col-sm-3 pull-right" style="text-align: right">
                                            <input type="text" pInputText size="50" placeholder="Search" (input)="dt2.filterGlobal($event.target.value, 'contains')" class="searchInput form-control">
                                        </div>
                                    </div>

                                </ng-template>
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th>Order No</th>
                                        <th>Date</th>
                                        <th>Customer Name</th>
                                        <th>Order Amount</th>


                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-col>
                                    <tr>
                                        <td><a class="btn btn-sm" (click)='RedrectEdit(col,"delivery")'>{{col.Adv_Order_No}}</a></td>
                                        <td>{{col.Date}}</td>
                                        <td>{{col.Customer_Name}}</td>
                                        <td>{{col.Total_Amount}}</td>

                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="paginatorright" let-state>
                                    Showing {{state.first+1}} of {{(state.first+1) + state.rows}} of {{state.totalRecords}}
                                </ng-template>
                            </p-table>
                        </div>
                    </div>
                    <div class="box-footer">
                        Total : {{HoldCustomOrderDataList.length}}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Customer Details For Take Away-->
<p-dialog header="Customer Details" [appendTo]="'body'" [(visible)]="CustomerDetailsPopUpFlag" [modal]="true" [responsive]="true" [closeOnEscape]="true" [style]="{ width: '36%', minWidth: '200px' }">

    <form name="CustomerDetailsForm" #CustomerDetailsForm="ngForm" novalidate>
        <div>
            <div class="form-group">
                <div class='col-sm-12'>
                    <label class="control-label">Customer Mobile <sup class="text-danger">*</sup></label>
                    <!-- <div  *ngIf='Objcustomerdetail.Redirect_To == "./K4C_Outlet_Sale_Bill"' class="col-sm-2 pull-right" style="width:170px;">
              <small>Ph no. Not Disclosed</small>
              <p-checkbox   (onChange)='NoPhone()' name='phonereq'  [(ngModel)]="NoPhoneFlag"   [binary]="true"></p-checkbox>
            </div> -->
                    <input class="form-control" autofocus type="text" name="Costomer_Mobile" #CustMob #Costomer_Mobile="ngModel" [(ngModel)]="Objcustomerdetail.Mobile" (change)='GetCustomerDetails()' maxlength="10" id='Customer' (keydown)="onKeydownMain($event, 'CustomerName')"
                        CompacctDigitonly="true" [disabled]="NoPhonedisable" [ngClass]="{
                   clearance:
                     (CustomerDetailsFormSubmitted && Costomer_Mobile.errors?.required) ||
                     (Costomer_Mobile.errors?.minlength && Costomer_Mobile.touched)
                 }" required placeholder="Customer Mobile">
                </div>
                <div class='col-sm-12'>
                    <label class="control-label">Customer Name <sup class="text-danger">*</sup></label>
                    <input class="form-control" name="Customer_Name" id='CustomerName' #Customer_Name="ngModel" (keydown)="onKeydownMain2($event, 'customerNAme')" [(ngModel)]="Objcustomerdetail.Contact_Name" [disabled]="namedisabled" [ngClass]="{'clearance':CustomerDetailsFormSubmitted && Customer_Name.errors?.required}"
                        placeholder="Customer Name" required>
                </div>
                <div class='col-sm-12'>
                    <label class="control-label">Address</label>
                    <input class="form-control" #location Compacct-Place (setAddress)="getAddressOnChange($event)" name="Location" placeholder="Address" />
                    <!-- <input class="form-control"
               name="Address"
               id='Address'
               #Address = "ngModel"
               (keydown)="onKeydownMain($event, 'Customer_DOB')"
               [(ngModel)] ="Objcustomerdetail.Address"
               placeholder="Address"> -->
                </div>
                <div class='col-sm-12'>
                    <label class="control-label">Date of Birth</label>
                    <p-inputMask [(ngModel)]="Objcustomerdetail.DOB" slotChar='__/__/1900' placeholder="01/01/1900" (onBlur)='checkDOB()' name='MaskDOB' mask="99/99/9999"></p-inputMask>
                    <!-- <ejs-datepicker  [format]="'dd/MMM/yyyy'"
               id='Customer_DOB'
               name="Customer_DOB"
               #Customer_DOB = "ngModel"
               [max]='Todaydate'
               (keydown)="onKeydownMain($event, 'Customer_Anni')"
               [(ngModel)] ="Objcustomerdetail.DOB"
               [ngClass]="{clearance:CustomerDetailsFormSubmitted && Customer_DOB.errors?.required}"
               placeholder="dd/MMM/yyyy">
          </ejs-datepicker> -->
                </div>

                <div class='col-sm-12'>
                    <label class="control-label">Anniversary</label>
                    <p-inputMask [(ngModel)]="Objcustomerdetail.DOA" slotChar='__/__/1900' placeholder="01/01/1900" (onBlur)='checkAnniversary()' name='MaskAnniversary' mask="99/99/9999"></p-inputMask>
                    <!-- <ejs-datepicker  [format]="'dd/MMM/yyyy'"
               id='Customer_Anni'
               name="Customer_Anni"
               [max]='Todaydate'
               #Customer_Anni = "ngModel"
               (keydown)="onKeydownMain($event, 'Customer_GST')"
               [(ngModel)] ="Objcustomerdetail.DOA"
               [ngClass]="{clearance:CustomerDetailsFormSubmitted && Customer_Anni.errors?.required}"
               placeholder="dd/MMM/yyyy">
          </ejs-datepicker> -->

                </div>
                <div class='col-sm-12'>
                    <label class="control-label">Customer GST </label>
                    <input class="form-control" #Customer_Gst name="Customer_GST" placeholder="Customer GST" #Customer_GST="ngModel" id='Customer_GST' (change)='checkGSTvalid(Objcustomerdetail.GST_No)' [(ngModel)]="Objcustomerdetail.GST_No" minlength="15" maxlength="15"
                        [ngClass]="{
                   clearance:
                     (GSTvalidFlag) ||
                     (Customer_GST.errors?.minlength && Customer_GST.touched)
                 }">

                </div>
                <div class='col-sm-12'>
                    <label class="control-label">Remarks</label>
                    <textarea class="form-control" name="Bill_Remarks" #Bill_Remarks="ngModel" id='Bill_Remarks' [(ngModel)]="Objcustomerdetail.Remarks" placeholder="Remarks"></textarea>
                    <!-- <textarea
        [rows]="3" [cols]="20" pInputTextarea autoResize="autoResize"
        ></textarea> -->
                </div>
            </div>
        </div>
    </form>
    <p-footer>
        <button type="button" (click)="CustomerDetailsPopUpFlag = false" class="btn btn-default">
      <i class="fa fa-fw fa-close" ></i>&nbsp;  Close
    </button>
        <button type="button" class="btn btn-primary" (click)="OnCustomerDetailsSubmit(CustomerDetailsForm.form.valid)">
      <i class="pi pi-check" ></i>&nbsp; OK
    </button>
    </p-footer>
</p-dialog>
<!-- Customer Details For Custom Order-->
<p-dialog header="Customer Details" [appendTo]="'body'" [(visible)]="CustomerDetailsAdvOrPopUpFlag" [modal]="true" [responsive]="true" [closeOnEscape]="true" [style]="{ width: '36%', minWidth: '200px' }">

    <form name="CustomerDetailsForm" #CustomerDetailsForm="ngForm" novalidate>
        <div>
            <div class="form-group">
                <div class='col-sm-12' *ngIf="$CompacctAPI.CompacctCookies.Cost_Cen_ID == '89' || $CompacctAPI.CompacctCookies.Cost_Cen_ID == '90' || $CompacctAPI.CompacctCookies.User_Type == 'A'">
                    <label class="control-label">Customer<span class="text-danger">*</span></label>
                    <p-dropdown [options]="SubledgerList" name="subledger" [(ngModel)]="Objcustomerdetail.Sub_Ledger_ID" (onChange)='GetSubLedgerDetails()' [showClear]="true" [emptyFilterMessage]="' No Customer Found'" [filter]="true" filterBy="label,value.name" [resetFilterOnHide]="true"
                        [placeholder]="'Select Customer'" [virtualScroll]="true" itemSize="30" #subledger="ngModel" [required]="$CompacctAPI.CompacctCookies.User_Type == 'A' ? false : true" [ngClass]="{
                            clearance:
                              (CustomerDetailsFormSubmitted && subledger.errors?.required) ||
                              (subledger.errors?.minlength && subledger.touched)
                          }" >
                    </p-dropdown>
                </div>
                <div class='col-sm-12'>
                    <label class="control-label">Customer Mobile <sup class="text-danger">*</sup></label>
                    <!-- <div  *ngIf='Objcustomerdetail.Redirect_To == "./K4C_Outlet_Sale_Bill"' class="col-sm-2 pull-right" style="width:170px;">
              <small>Ph no. Not Disclosed</small>
              <p-checkbox   (onChange)='NoPhone()' name='phonereq'  [(ngModel)]="NoPhoneFlag"   [binary]="true"></p-checkbox>
            </div> -->
                    <input class="form-control" autofocus type="text" name="Costomer_Mobile" #CustMob #Costomer_Mobile="ngModel" [(ngModel)]="Objcustomerdetail.Mobile" (change)='GetCustomerDetails()' maxlength="10" id='Customer' (keydown)="onKeydownMain($event, 'CustomerName')"
                        CompacctDigitonly="true" [disabled]="NoPhonedisable" [ngClass]="{
                   clearance:
                     (CustomerDetailsFormSubmitted && Costomer_Mobile.errors?.required) ||
                     (Costomer_Mobile.errors?.minlength && Costomer_Mobile.touched)
                 }" required placeholder="Customer Mobile">
                </div>
                <div class='col-sm-12'>
                    <label class="control-label">Customer Name <sup class="text-danger">*</sup></label>
                    <input class="form-control" name="Customer_Name" id='CustomerName' #Customer_Name="ngModel" (keydown)="onKeydownMain2($event, 'customerNAme')" [(ngModel)]="Objcustomerdetail.Contact_Name" [disabled]="namedisabled" [ngClass]="{'clearance':CustomerDetailsFormSubmitted && Customer_Name.errors?.required}"
                        placeholder="Customer Name" required>
                </div>
                <div class='col-sm-12'>
                    <label class="control-label">Address</label>
                    <input class="form-control" *ngIf="!this.Objcustomerdetail.Address" #location Compacct-Place (setAddress)="getAddressOnChange($event)" name="Location" placeholder="Address" />
                    <input class="form-control" *ngIf="this.Objcustomerdetail.Address" name="Address" id='Address' #Address="ngModel" (keydown)="onKeydownMain($event, 'Customer_DOB')" [(ngModel)]="Objcustomerdetail.Address" [disabled]="subledgerdisable" placeholder="Address">
                </div>
                <div class='col-sm-12'>
                    <label class="control-label">Date of Birth</label>
                    <p-inputMask [(ngModel)]="Objcustomerdetail.DOB" slotChar='__/__/1900' placeholder="01/01/1900" (onBlur)='checkDOB()' [disabled]="subledgerdisable" name='MaskDOB' mask="99/99/9999"></p-inputMask>
                    <!-- <ejs-datepicker  [format]="'dd/MMM/yyyy'"
               id='Customer_DOB'
               name="Customer_DOB"
               #Customer_DOB = "ngModel"
               [max]='Todaydate'
               (keydown)="onKeydownMain($event, 'Customer_Anni')"
               [(ngModel)] ="Objcustomerdetail.DOB"
               [ngClass]="{clearance:CustomerDetailsFormSubmitted && Customer_DOB.errors?.required}"
               placeholder="dd/MMM/yyyy">
          </ejs-datepicker> -->
                </div>

                <div class='col-sm-12'>
                    <label class="control-label">Anniversary</label>
                    <p-inputMask [(ngModel)]="Objcustomerdetail.DOA" slotChar='__/__/1900' placeholder="01/01/1900" (onBlur)='checkAnniversary()' [disabled]="subledgerdisable" name='MaskAnniversary' mask="99/99/9999"></p-inputMask>
                    <!-- <ejs-datepicker  [format]="'dd/MMM/yyyy'"
               id='Customer_Anni'
               name="Customer_Anni"
               [max]='Todaydate'
               #Customer_Anni = "ngModel"
               (keydown)="onKeydownMain($event, 'Customer_GST')"
               [(ngModel)] ="Objcustomerdetail.DOA"
               [ngClass]="{clearance:CustomerDetailsFormSubmitted && Customer_Anni.errors?.required}"
               placeholder="dd/MMM/yyyy">
          </ejs-datepicker> -->

                </div>
                <div class='col-sm-12'>
                    <label class="control-label">Customer GST </label>
                    <input class="form-control" #Customer_Gst name="Customer_GST" placeholder="Customer GST" #Customer_GST="ngModel" id='Customer_GST' (change)='checkGSTvalid(Objcustomerdetail.GST_No)' [(ngModel)]="Objcustomerdetail.GST_No" [disabled]="subledgerdisable"
                        minlength="15" maxlength="15" [ngClass]="{
                   clearance:
                     (GSTvalidFlag) ||
                     (Customer_GST.errors?.minlength && Customer_GST.touched)
                 }">

                </div>
                <div class='col-sm-12'>
                    <label class="control-label">Remarks</label>
                    <textarea class="form-control" name="Bill_Remarks" #Bill_Remarks="ngModel" id='Bill_Remarks' [(ngModel)]="Objcustomerdetail.Remarks" [disabled]="subledgerdisable" placeholder="Remarks"></textarea>
                    <!-- <textarea
        [rows]="3" [cols]="20" pInputTextarea autoResize="autoResize"
        ></textarea> -->
                </div>
            </div>
        </div>
    </form>
    <p-footer>
        <button type="button" (click)="CustomerDetailsAdvOrPopUpFlag = false" class="btn btn-default">
      <i class="fa fa-fw fa-close" ></i>&nbsp;  Close
    </button>
        <button type="button" class="btn btn-primary" (click)="OnCustomerDetailsSubmit(CustomerDetailsForm.form.valid)">
      <i class="pi pi-check" ></i>&nbsp; OK
    </button>
    </p-footer>
</p-dialog>

<!-- Bill Without Stock -->
<p-dialog header="Bill" [appendTo]="'body'" [visible]="BillWithoutStockPopup" [closeOnEscape]="true" [closable]="false" [modal]="true" [responsive]="true" [style]="{ width: '30%', minWidth: '200px' }" style="text-align: center;" [minY]="80" [maximizable]="true"
    [baseZIndex]="10000">
    <div class="col-sm-6Mp">
        <div class="box box-successMP wellMP well-smMP shadow">
            <div class="form-horizontal">
                <div class="box-body">
                    <div class="form-group">
                        <div class='col-sm-12'>
                            <label class="control-label">Total Amount:</label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{Total}}
                        </div>
                        <div class='col-sm-12'>
                            <label class="control-label">Rounded Off:</label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{Round_Off}}
                        </div>
                        <div class='col-sm-12'>
                            <label class="control-label">Amount Payable:</label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{Amount_Payable}}
                        </div>
                        <div class='col-sm-12'>
                            <label class="control-label">Advance:</label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{Adv}}
                        </div>
                        <div class='col-sm-12'>
                            <label class="control-label">Net Payable:</label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{Net_Payable}}
                        </div>
                        <div class='col-sm-12'>
                            <label class="control-label">Cash Amount:</label>
                            <input class="form-control" type="text" style="text-align: center" name="cash" #cash="ngModel" [(ngModel)]="ObjcashForm.Cash_Amount" (ngModelChange)="AmountChange()" CompacctDigitonly="true">
                        </div>
                        <div class='col-sm-12'>
                            <label class="control-label">Wallet Amount: </label>
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <select name="wallet" #wallet="ngModel" [(ngModel)]="ObjcashForm.Wallet_Ac_ID">
                                          <option [ngValue]="undefined">select</option>
                                           <option *ngFor = "let option of walletlist" [value] ="option.Txn_ID">
                                             {{option.Ledger_Name}}
                                          </option>
                                      </select>
                                </div>
                                <input type="text" class="form-control" id="exampleInputAmount" name="Wallet" #Wallet="ngModel" [(ngModel)]="ObjcashForm.Wallet_Amount" (ngModelChange)="AmountChange()" CompacctDigitonly="true">
                            </div>
                        </div>

                        <div class='col-sm-12'>
                            <label class="control-label">Card Amount: </label>
                            <input class="form-control" type="text" style="text-align: center" name="card" #card="ngModel" [(ngModel)]="ObjcashForm.Card_Amount" (ngModelChange)="AmountChange()" CompacctDigitonly="true">
                        </div>
                        <div class='col-sm-12'>
                            <label class="control-label">Credit to Account:</label>
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <select name="Credit" #Credit="ngModel" [(ngModel)]="ObjcashForm.Credit_To_Ac_ID">
                                               <option [ngValue]="undefined">select</option>
                                               <option *ngFor = "let option of creditlist" [value] ="option.Txn_ID">
                                                    {{option.Ledger_Name}}
                                              </option>
                                           </select>
                                </div>
                                <input type="text" class="form-control" id="exampleInputAmount1" name="credit" #credit="ngModel" [(ngModel)]="ObjcashForm.Credit_To_Amount" (ngModelChange)="AmountChange()" CompacctDigitonly="true">
                            </div>
                        </div>

                        <div class='col-sm-12'>
                            <label class="control-label">Total Paid:</label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{ObjcashForm.Total_Paid}}
                        </div>
                        <div class='col-sm-12'>
                            <label class="control-label">Refund Amount:</label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{ObjcashForm.Refund_Amount}}
                        </div>
                        <div class='col-sm-12'>
                            <label class="control-label">Due Amount:</label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{ObjcashForm.Due_Amount}}
                        </div>

                    </div>

                </div>
            </div>
        </div>
    </div>
    <p-footer>
        <button type="button" (click)="BillWithoutStockPopup = false" class="btn btn-default">
            <i class="fa fa-fw fa-close" ></i>&nbsp;  Close
            </button>
        <button type="button" class="btn btn-primary" (click)="SaveBill()">
            <i class="glyphicon glyphicon-save" ></i>&nbsp; Save
            </button>
    </p-footer>
</p-dialog>

<!-- EDIT DELIVERY -->
<p-dialog header={{Adv_Order_No}} [appendTo]="'body'" [(visible)]="EditDeliverypopup" [modal]="true" [responsive]="true" [closeOnEscape]="true" [closable]="false" [baseZIndex]="123" [style]="{ width: '36%', minWidth: '200px' }">

    <form name="CustomerDetailsForm" #CustomerDetailsForm="ngForm" novalidate>
        <div>
            <div class="form-group">
                <div class='col-sm-12'>
                    <label class="control-label">Delivery Date</label>
                    <ejs-datepicker [format]="'dd/MMM/yyyy'" [(value)]="delivery_Date"></ejs-datepicker>
                </div>
                <div class='col-sm-12'>
                    <label class="control-label">Delivery Time</label>
                    <ejs-timepicker placeholder='Select a time' [(value)]="Del_Date_Time" name="Del_Date_Time" [format]="'hh:mm a'" [min]='minTime' [max]='maxTime'></ejs-timepicker>
                </div>
                <div class='col-sm-12'>
                    <label class="control-label">Delivery Location</label>
                    <!-- <div class="pull-right">
                            <button class="button1" (click)="ShowHomeDeliverypopup()">Home Delivery</button>
                        </div> -->
                    <select class="form-control" name="delLocation" #delLocation="ngModel" [(ngModel)]="Del_Cost_Cent_ID">
                  <option  [ngValue]="undefined">Select</option>
           <option *ngFor = "let option of delloclist" [value] ="option.Cost_Cen_ID">
              {{option.Cost_Cen_Name}}
            </option>
      </select>
                </div>

            </div>

        </div>
    </form>
    <p-footer>
        <button type="button" (click)="EditDeliverypopup = false" class="btn btn-default">
<i class="fa fa-fw fa-close" ></i>&nbsp;  Close
</button>
        <button type="button" class="btn btn-primary" (click)="EditDeliverySave()">
<i class="glyphicon glyphicon-save" ></i>&nbsp; Update
</button>
    </p-footer>
</p-dialog>