<p-toast key="compacct-toast" baseZIndex="99999"></p-toast>
<div class="row">
    <div class="col-xs-12">
        <div class="box box-primary">
            <div class="form-horizontal">
                <div class="box-body" >
                    <form name="ProjectForm" #ProjectForm="ngForm" novalidate> 
                        <div class="form-group">
                            <div class="col-sm-2">
                                <label class="control-label">Task Type<sup class="text-danger">*</sup></label>
                                <select class="form-control" 
                                 [ngClass]="{'clearance':ProjectTaskSubmitted && actiontakenFollowUpCreation?.errors?.required}"
                                 name="actiontakenFollowUpCreation"
                                 #actiontakenFollowUpCreation="ngModel"
                                 [(ngModel)]="ObjProjectTask.Task_Type"
                                 [disabled]='true'
                                 required>
                                 <option [ngValue]="undefined">Select</option>
                                    <option value="Project">Project</option>
                                </select>
                            </div>
                            <div class="col-sm-5">
                                <label class="control-label">Project Name&nbsp;<span class="text-danger" >*</span></label>
                                <span (click)='DynamicRedirectTo()' class="btn-vk  pull-right createPatient"><i class="fa fa-fw  fa-database"></i>&nbsp;Manage Projects</span>
                               
                                <p-dropdown
                                [options]="ProjectList"
                                name="projectname"
                                [(ngModel)]="ObjProjectTask.Project_ID"
                                [showClear]="true"
                                [emptyFilterMessage]="' No Project Found'"
                                (onChange)="GetSiteList()"
                                [filter]="true"
                                filterBy="label,value.name"
                                [placeholder]="'Select Project Name'"
                                [virtualScroll]="true"
                                itemSize="30"
                                #projectname="ngModel"
                                [styleClass]="
                                ProjectTaskSubmitted && projectname.errors?.required? 'clearance': ''"
                                [required]="true"
                              >
                              </p-dropdown>
                            </div>
                            <div class="col-sm-5">
                              <label class="control-label">Site Name&nbsp;<span class="text-danger" >*</span></label>
                            
                              <p-dropdown
                              [options]="SiteList"
                              name="siteName"
                              [(ngModel)]="ObjProjectTask.Site_ID"
                              [showClear]="true"
                              [emptyFilterMessage]="' No Site Found'"
                              (onChange)="GetTask()"
                              [filter]="true"
                              filterBy="label,value.name"
                              [placeholder]="'Select Site Name'"
                              [virtualScroll]="true"
                              itemSize="30"
                              #siteName="ngModel"
                              [styleClass]="
                              ProjectTaskSubmitted && siteName.errors?.required? 'clearance': ''"
                              [required]="true"
                            >
                            </p-dropdown>
                            </div>
                        </div>
                        </form> 
                        <div  class="control-section">
                            <ejs-gantt id="ganttDefault"
                             height="430px" #gantt
                            [dataSource]="data" [taskFields]="taskSettings"
                            [splitterSettings]="splitterSettings"
                            allowExcelExport='true'
                            [treeColumnIndex]="1"
                            [allowSelection]="true"
                            [gridLines]="gridLines"
                            (toolbarClick)="toolbarClick($event)"
                            [toolbar]="toolbar"> 
                             <e-columns>
                                <e-column field='' headerText='' width=40 >
                                    <ng-template #template let-data>
                                        <span *ngIf='data.taskData.isSubTask'></span>
                                        <button *ngIf='!data.taskData.isSubTask' (click)='GetSelectedRow(data)' class="btn btn-xs btn-flat btn-reddit"><i class="fa fa-fw fa-pencil"></i></button>
                                       </ng-template>
                                </e-column>
                                    <e-column field='Task_Name' headerText='Task Name'></e-column>
                                    <e-column field= 'Task_Start_Date' headerText='Start Date'></e-column>
                                    <e-column field= 'Duration' headerText='Duration'></e-column>
                                    <e-column field='Remarks' headerText= 'Remarks' ></e-column>

                                </e-columns>
                        
                        </ejs-gantt>
                       
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <p-overlayPanel 
    [dismissable]="true" [showCloseIcon]="true"
    [appendTo]="'body'"
    (onShow)='CreateLightBoxSubmitted = false;'
    [baseZIndex]="9999999" #Task_Create_Overlay>
    <div class="form-horizontal">
        <form
        name="Task_CreateForm"
        #Task_CreateForm="ngForm"
        novalidate
        >
        <div class="form-group">
          <div class="col-sm-12">
            <label class="control-label">Task Name<sup class="text-danger">*</sup ></label>
          <input
                type="text"
                class="form-control"
                name="name"
                #name="ngModel"
                [(ngModel)]="TaskNameModel"
                placeholder="Task Name"
                allow-pattern="([a-z ]|\.)"
                [ngClass]="{clearance: CreateLightBoxSubmitted && name?.errors?.required}"
                required
              >
          </div>
          <div class="col-sm-12">
            <label class="control-label">Waitage Persentage<sup class="text-danger">*</sup ></label>
                <input class="form-control" type="text"
                name="Waitage_Persentage" #Waitage_Persentage="ngModel"
                placeholder="Waitage Persentage"
                [ngClass]="{'clearance':CreateLightBoxSubmitted && Waitage_Persentage?.errors?.required}"
                [(ngModel)]="TaskWaitageModel" 
                CompacctDigitonly="true"
                required>
          </div>
          <button (click)='LightBoxSave("Task_Create_Overlay")'
           class="btn btn-sm btn-success pull-right" style="margin-right: 15px;margin-top: 10px;"
           [disabled]="LightBoxSpinner"
           >
           <p-progressSpinner
             *ngIf="LightBoxSpinner"
             [style]="{ width: '15px', height: '15px' }"
             strokeWidth="8"
             animationDuration=".5s"
           ></p-progressSpinner>
            <i class="fa fa-fw  fa-plus"></i>  Create</button>
        </div>
        
        </form>
      </div>
  </p-overlayPanel>
  <p-overlayPanel 
    [dismissable]="true" [showCloseIcon]="true"
    [appendTo]="'body'"
    (onShow)='CreateLightBoxSubmitted = false;'
    [baseZIndex]="9999999" #Sub_Task_Create_Overlay>
    <div class="form-horizontal">
        <form
        name="Task_CreateForm"
        #Task_CreateForm="ngForm"
        novalidate
        >
        <div class="form-group">
          <div class="col-sm-12">
            <label class="control-label">Sub Task Name<sup class="text-danger">*</sup ></label>
          <input
                type="text"
                class="form-control"
                name="name"
                #name="ngModel"
                [(ngModel)]="SubTaskNameModel"
                placeholder="Sub Task Name"
                allow-pattern="([a-z ]|\.)"
                [ngClass]="{clearance: CreateLightBoxSubmitted && name?.errors?.required}"
                required
              >
          </div>
          <div class="col-sm-12">
            <label class="control-label">Waitage Persentage<sup class="text-danger">*</sup ></label>
                <input class="form-control" type="text"
                name="Waitage_Persentage" #Waitage_Persentage="ngModel"
                placeholder="Waitage Persentage"
                [ngClass]="{'clearance':CreateLightBoxSubmitted && Waitage_Persentage?.errors?.required}"
                [(ngModel)]="SubTaskWaitageModel" 
                CompacctDigitonly="true"
                required>
          </div>
        
          <button (click)='LightBoxSave("Sub_Task_Create_Overlay")'
           class="btn btn-sm btn-success pull-right" style="margin-right: 15px;margin-top: 10px;"
           [disabled]="LightBoxSpinner"
           >
           <p-progressSpinner
             *ngIf="LightBoxSpinner"
             [style]="{ width: '15px', height: '15px' }"
             strokeWidth="8"
             animationDuration=".5s"
           ></p-progressSpinner>
            <i class="fa fa-fw  fa-plus"></i>  Create</button>
        </div>
        
        </form>
      </div>
  </p-overlayPanel>
    <!-- TASK CREATE -->
    <p-dialog header="Task Details"
    [appendTo]="'body'"
    [visible]="TaskModalFlag"
    [closeOnEscape]="true"
    [closable]="false"
    [modal]="true"
    [responsive]="true"
    [style]="TaskModaLStyleObj"
    style="text-align: center;"
    [minY]="70"
    [maximizable]="true"
    [baseZIndex]="10000">
    <div class="form-group" *ngIf='ObjProjectTask?.Project_Name'>
        <div class="col-sm-12" style="margin-bottom:1em;padding: 0.5em 0;background-color: #0080002e;text-align: center;border-radius: 5px;">
            Project : <b>{{ObjProjectTask.Project_Name.toUpperCase()}}</b> | Site : <b>{{ObjProjectTask.Site_Name}}</b>
        </div>
    </div>
        
        <div class="row form-horizontal" style="margin-bottom:4em;">
            <div class="col-md-12">
                <div class="col-md-12" >
                    <div class="form-horizontal">
                        <div class="box-body">
                            <form  name="TaskModalUpdate" #TaskModalUpdate="ngForm" novalidate>
                                <fieldset [disabled]="TaskDisabledFlag">
                                    <div class="form-group">
                                        <div class="col-sm-6" >
                                            <label class="control-label">Task&nbsp;<span class="text-danger" >*</span></label>
                                            <span (click)="Task_Create_Overlay.toggle($event)" class="btn-vk  pull-right createPatient"><i class="fa fa-fw  fa-plus"></i> Create</span>
                                            <p-dropdown
                                            [options]="TaskList"
                                            name="Taskname"
                                            [(ngModel)]="ObjTask.Task_ID"
                                            [showClear]="true"
                                            [emptyFilterMessage]="' No Task Found'"
                                            (onChange)="GetSubTask()"
                                            [filter]="true"
                                            filterBy="label,value.name"
                                            [placeholder]="'Select Task Name'"
                                            [virtualScroll]="true"
                                            itemSize="30"
                                            #Taskname="ngModel"
                                            [styleClass]="
                                            TaskSubmitted && Taskname.errors?.required? 'clearance': ''"
                                            [required]="true"
                                            [disabled]='TaskCreateList.length'
                                        >
                                        </p-dropdown>
                                        </div>
                                        <div class="col-sm-6">
                                        <label class="control-label">Sub Task&nbsp;<span class="text-danger" >*</span></label>
                                        <span  *ngIf='ObjTask.Task_ID' (click)="Sub_Task_Create_Overlay.toggle($event)" class="btn-vk  pull-right createPatient"><i class="fa fa-fw  fa-plus"></i> Create</span>
                                            <p-dropdown
                                        [options]="SubTaskList"
                                        name="SubTask"
                                        [(ngModel)]="ObjTask.Sub_Task_ID"
                                        [showClear]="true"
                                        [emptyFilterMessage]="' No Sub Task Found'"
                                        [filter]="true"
                                        filterBy="label,value.name"
                                        [placeholder]="'Select Sub Task Name'"
                                        [virtualScroll]="true"
                                        itemSize="30"
                                        #SubTask="ngModel"
                                        [styleClass]="
                                        TaskSubmitted && SubTask.errors?.required? 'clearance': ''"
                                        [required]="true"
                                        >
                                        </p-dropdown>
                                        </div>
                                        <div class="col-sm-12">
                                            <label class="control-label">Subject<sup class="text-danger">*</sup></label>
                                            <textarea class="form-control" rows="2" name="Subject"
                                            #Subject="ngModel"
                                            [ngClass]="{'clearance':TaskSubmitted && Subject?.errors?.required}"
                                            [(ngModel)]="ObjTask.Task_Subject" placeholder="Subject"
                                            required></textarea>
                                        </div>
                                        <div class="col-sm-6">
                                            <label class="control-label">Remarks<sup class="text-danger">*</sup></label>
                                            <textarea class="form-control" rows="4" name="remarkFollowUpCreation"
                                            #remarkFollowUpCreation="ngModel"
                                            [ngClass]="{'clearance':TaskSubmitted && remarkFollowUpCreation?.errors?.required}"
                                            [(ngModel)]="ObjTask.Remarks" placeholder="Remarks"
                                            required></textarea>
                                        </div>
                                        <div class="col-sm-6">
                                            <label class="control-label">Start Date<sup class="text-danger">*</sup></label>
                                            <input type="date" class="form-control"
                                            id="taskstartdate1" #taskstartdate1="ngModel"
                                            name="taskstartdate1" [ngModel]="TaskStartDate | date:'yyyy-MM-dd'"
                                            (ngModelChange)="TaskStartDate = $event"
                                            [ngClass]="{'clearance':TaskSubmitted && taskstartdate1?.errors?.required}"
                                            required>
                                        </div>
                                        <div class="col-sm-6">
                                            <label class="control-label">Target Date<sup class="text-danger">*</sup></label>
                                            <input type="date" class="form-control"
                                            id="taskenddate1" #taskenddate1="ngModel"
                                            name="taskenddate1" [ngModel]="TaskEndtDate | date:'yyyy-MM-dd'"
                                            (ngModelChange)="TaskEndtDate = $event"
                                            [ngClass]="{'clearance':TaskSubmitted && taskenddate1?.errors?.required}"
                                            required>
                                        </div>
                                        
                                        <div class="col-sm-4">
                                            <label class="control-label">Waitage Persentage<sup class="text-danger">*</sup></label>
                                            <div class="input-group">
                                                
                                            <input class="form-control" type="text"
                                            name="Waitage_Persentage" #Waitage_Persentage="ngModel"
                                            [ngClass]="{'clearance':TaskSubmitted && Waitage_Persentage?.errors?.required}"
                                            [(ngModel)]="ObjTask.Waitage_Persentage_Against_Sub_Task" 
                                            CompacctDigitonly="true"
                                            required>
                                        <span class="input-group-addon">%</span>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <label class="control-label">
                                                Assign To <sup class="text-danger">*</sup></label>
                                            <select class="form-control" name='Assign' #Assign='ngModel'
                                            [ngClass]="{'clearance': TaskSubmitted &&  Assign?.errors?.required}"
                                            [(ngModel)]="ObjTask.User_ID" required>
                                                <option [ngValue]="undefined">Select</option>
                                                <option *ngFor="let option of AssignToList" [ngValue]="option.User_ID">{{option.Name}}</option>
                                            </select>
                                        </div>
                                        <div class="col-sm-4">
                                            <label class="control-label">Status<sup class="text-danger">*</sup></label>
                                            <select class="form-control" 
                                            [ngClass]="{'clearance':TaskSubmitted && Status?.errors?.required}"
                                            name="Status"
                                            #Status="ngModel"
                                            [(ngModel)]="ObjTask.Task_Status"
                                            required>
                                                <option [ngValue]="undefined">Select</option>
                                                <option value="Not Started">Not Started</option>
                                                <option value="In Progress">In Progress</option>
                                                <option value="Completed">Completed</option>
                                            </select>
                                        </div>
                                        <div class="col-sm-12">
                                            <button class="btn btn-primary custombutton pull-right" [disabled]='!ObjTask.Task_ID' (click)="AddTask(TaskModalUpdate.form.valid)">
                                                <i class="fa fa-fw fa-plus"></i>&nbsp;ADD</button>
                                        </div>
                                    </div>
                                    <div class="table-responsive no-padding" style="margin-top:1.5em">
                                        <table class="table table-bordered">
                                            <thead>
                                            <tr style="background-color:#3c8dbc;color:white;">
                                                <th>Sl.</th>
                                                <th>Sub Task </th>
                                                <th>Subject</th>
                                                <th>Remarks</th>
                                                <th>Start Date</th>
                                                <th>Target Date</th>
                                                <th>Waitage Persentage</th>
                                                <th>Assign To</th>
                                                <th>Status</th>
                                                <th>Action</th>
                                
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr *ngFor="let d of TaskCreateList;let odd = odd;let index = index" [class.even]="odd">
                                                <td>{{ index + 1 }}</td>
                                                <td>{{d.Sub_Task_Name}}</td>
                                                <td>{{d.Task_Subject}}</td>
                                                <td>{{d.Remarks}}</td>
                                                <td>{{d.Task_Start_Date}}</td>
                                                <td>{{d.Task_Target_Date}}</td>
                                                <td>{{d.Waitage_Persentage_Against_Sub_Task}}</td>
                                                <td>{{d.Assign_To_Name}}</td>
                                                <td>{{d.Task_Status}}</td>
                                                <td>                                                   
                                                    <button (click)="EditTask(d)" *ngIf="d.Doc_ID.toString() != '0'" class="btn btn-xs btn-primary"><i class="fa fa-pencil"></i></button>
                                                    &nbsp;
                                                    <button (click)="DeleteTask(index)" class="btn btn-xs btn-danger"><i class="fa fa-trash"></i></button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        </div>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- <div class="col-md-6">
                    <div class="form-horizontal">
                        <div class="box-body">
                            <form  name="TaskRemarksModalUpdate" #TaskRemarksModalUpdate="ngForm" novalidate>
                                <fieldset [disabled]="TaskRemarksDisabledFlag">
                                    <div class="form-group" style="margin-bottom: 1.5em;">  
                                        <h5 style="
                                        padding: 0.5em 1em;
                                        background: #c1c1c185;
                                        border-top: 5px solid #3c8dbc;
                                        border-bottom: 1px solid #c6c6c6;
                                        margin-top: 0px;
                                        ">
                                        <i class="fa fa-fw fa-fax">
                                        </i> &nbsp;<strong>Update Remarks :</strong>
                                    </h5>    
                                        <div class="col-sm-12">
                                            <label class="control-label">Remarks<sup class="text-danger">*</sup></label>
                                            <textarea class="form-control" rows="4" name="remarkFollowUpCreation"
                                            #remarkFollowUpCreation="ngModel"
                                            [ngClass]="{'clearance':TaskRemarksSubmitted && remarkFollowUpCreation?.errors?.required}"
                                            [(ngModel)]="ObjTaskRemarks.Remarks" placeholder="Remarks"
                                            required></textarea>
                                        </div>       
                                        <div class="col-sm-12">
                                            <label class="control-label">Status<sup class="text-danger">*</sup></label>
                                            <select class="form-control" 
                                            [ngClass]="{'clearance':TaskRemarksSubmitted && Status?.errors?.required}"
                                            name="Status"
                                            #Status="ngModel"
                                            [(ngModel)]="ObjTaskRemarks.Status"
                                            required>
                                                <option [ngValue]="undefined">Select</option>
                                                <option value="Not Started">Not Started</option>
                                                <option value="In Progress">In Progress</option>
                                                <option value="Completed">Completed</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="table-responsive no-padding">
                                    <table class="table table-bordered">
                                        <thead>
                                        <tr style="background-color:#3c8dbc;color:white;">
                                            <th>Sl.</th>
                                            <th>User Name</th>
                                            <th>Posted ON</th>
                                            <th>Remarks</th>
                                            <th>Status</th>
                            
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr *ngFor="let d of TaskRemarksList;let odd = odd;let index = index" [class.even]="odd">
                                            <td>{{ index + 1 }}</td>
                                            <td>{{ d.User_Name }}</td>
                                            <td>{{d.Posted_ON ? (d.Posted_ON | date :'dd/MMM/yyyy') : '-'}}</td>
                                            <td>{{ d.Remarks ? d.Remarks : "-" }}</td>
                                            <td>{{ d.Status ? d.Status : "-" }}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                        <div class="box-footer">
                            <button type="button" class="btn btn-primary pull-right"  [disabled]="TaskRemarksSubmitSpinner || TaskRemarksDisabledFlag" (click)="SaveTaskRemarks(TaskRemarksModalUpdate.form.valid)">
                                <p-progressSpinner
                                *ngIf="TaskRemarksSubmitSpinner"
                                [style]="{ width: '15px', height: '15px' }"
                                strokeWidth="8"
                                animationDuration=".5s"
                            ></p-progressSpinner> <i class="fa fa-fw  fa-save"></i>&nbsp;SAVE
                            </button>
                        </div>
                    </div>
                </div> -->
            </div>
        </div>
    
        <p-footer>
            <button type="button" (click)="TaskModalFlag = false" class="btn btn-default">
                CLOSE
            </button>
            <button type="button" class="btn btn-primary pull-right"  [disabled]="TaskSubmitSpinner || TaskDisabledFlag" (click)="SaveTask()">
                <p-progressSpinner
                *ngIf="TaskSubmitSpinner"
                [style]="{ width: '15px', height: '15px' }"
                strokeWidth="8"
                animationDuration=".5s"
            ></p-progressSpinner> <i class="fa fa-fw  fa-save"></i>&nbsp;SAVE
            </button>
            
        </p-footer>
    </p-dialog>
 
    <!-- TASK EDIT -->
    <p-dialog header="Task Edit"
    [appendTo]="'body'"
    [visible]="TaskEditModalFlag"
    [closeOnEscape]="true"
    [closable]="false"
    [modal]="true"
    [responsive]="true"
    [style]="{ width: '68%', minWidth: '200px' }"
    style="text-align: center;"
    [minY]="95"
    [maximizable]="true"
    [baseZIndex]="10000">       
       <div class="row form-horizontal" style="margin-bottom:4em;">
           <div class="col-md-12">
               <div class="col-md-12" >
                   <div class="form-horizontal">
                       <div class="box-body">
                           <form  name="TaskEditModalUpdate" #TaskEditModalUpdate="ngForm" novalidate>
                               <fieldset>
                                   <div class="form-group">
                                       <h5 style="
                                       padding: 0.5em 1em;
                                       background: #c1c1c185;
                                       border-top: 5px solid #3c8dbc;
                                       border-bottom: 1px solid #c6c6c6;
                                       margin-top: 0px;
                                       ">
                                       <i class="fa fa-fw fa-fax">
                                       </i> &nbsp;<strong>Task Edit:</strong>
                                       </h5>
                                       <div class="col-sm-6" >
                                        <label class="control-label">Task&nbsp;<span class="text-danger" >*</span></label>
                                        <span (click)="Task_Create_Overlay.toggle($event)" class="btn-vk  pull-right createPatient"><i class="fa fa-fw  fa-plus"></i> Create</span>
                                        <p-dropdown
                                        [options]="TaskList"
                                        name="Taskname"
                                        [(ngModel)]="ObjTask.Task_ID"
                                        [showClear]="true"
                                        [emptyFilterMessage]="' No Task Found'"
                                        (onChange)="GetSubTask()"
                                        [filter]="true"
                                        filterBy="label,value.name"
                                        [placeholder]="'Select Task Name'"
                                        [virtualScroll]="true"
                                        itemSize="30"
                                        #Taskname="ngModel"
                                        [styleClass]="
                                        TaskSubmitted && Taskname.errors?.required? 'clearance': ''"
                                        [required]="true"
                                        [disabled]='true'
                                    >
                                    </p-dropdown>
                                    </div>
                                       <div class="col-sm-6">
                                       <label class="control-label">Sub Task&nbsp;<span class="text-danger" >*</span></label>
                                       <span  *ngIf='ObjTask.Task_ID' (click)="Sub_Task_Create_Overlay.toggle($event)" class="btn-vk  pull-right createPatient"><i class="fa fa-fw  fa-plus"></i> Create</span>
                                           <p-dropdown
                                       [options]="SubTaskList"
                                       name="SubTask"
                                       [(ngModel)]="ObjTask.Sub_Task_ID"
                                       [showClear]="true"
                                       [emptyFilterMessage]="' No Sub Task Found'"
                                       [filter]="true"
                                       filterBy="label,value.name"
                                       [placeholder]="'Select Sub Task Name'"
                                       [virtualScroll]="true"
                                       itemSize="30"
                                       #SubTask="ngModel"
                                       [styleClass]="
                                       TaskSubmitted && SubTask.errors?.required? 'clearance': ''"
                                       [required]="true"
                                       >
                                       </p-dropdown>
                                       </div>
                                       <div class="col-sm-12">
                                           <label class="control-label">Subject<sup class="text-danger">*</sup></label>
                                           <textarea class="form-control" rows="2" name="Subject"
                                           #Subject="ngModel"
                                           [ngClass]="{'clearance':TaskSubmitted && Subject?.errors?.required}"
                                           [(ngModel)]="ObjTask.Task_Subject" placeholder="Subject"
                                           required></textarea>
                                       </div>
                                       <div class="col-sm-6">
                                           <label class="control-label">Remarks<sup class="text-danger">*</sup></label>
                                           <textarea class="form-control" rows="4" name="remarkFollowUpCreation"
                                           #remarkFollowUpCreation="ngModel"
                                           [ngClass]="{'clearance':TaskSubmitted && remarkFollowUpCreation?.errors?.required}"
                                           [(ngModel)]="ObjTask.Remarks" placeholder="Remarks"
                                           required
                                           disabled></textarea>
                                       </div>
                                       <div class="col-sm-6">
                                           <label class="control-label">Start Date<sup class="text-danger">*</sup></label>
                                           <input type="date" class="form-control"
                                           id="taskstartdate1" #taskstartdate1="ngModel"
                                           name="taskstartdate1" [ngModel]="TaskStartDate | date:'yyyy-MM-dd'"
                                           (ngModelChange)="TaskStartDate = $event"
                                           [ngClass]="{'clearance':TaskSubmitted && taskstartdate1?.errors?.required}"
                                           required>
                                       </div>
                                       <div class="col-sm-6">
                                           <label class="control-label">Target Date<sup class="text-danger">*</sup></label>
                                           <input type="date" class="form-control"
                                           id="taskenddate1" #taskenddate1="ngModel"
                                           name="taskenddate1" [ngModel]="TaskEndtDate | date:'yyyy-MM-dd'"
                                           (ngModelChange)="TaskEndtDate = $event"
                                           [ngClass]="{'clearance':TaskSubmitted && taskenddate1?.errors?.required}"
                                           required>
                                       </div>
                                       
                                       <div class="col-sm-4">
                                           <label class="control-label">Waitage Persentage<sup class="text-danger">*</sup></label>
                                           <div class="input-group">
                                               
                                           <input class="form-control" type="text"
                                           name="Waitage_Persentage" #Waitage_Persentage="ngModel"
                                           [ngClass]="{'clearance':TaskSubmitted && Waitage_Persentage?.errors?.required}"
                                           [(ngModel)]="ObjTask.Waitage_Persentage_Against_Sub_Task" 
                                           CompacctDigitonly="true"
                                           required>
                                       <span class="input-group-addon">%</span>
                                           </div>
                                       </div>
                                       <div class="col-sm-4">
                                           <label class="control-label">
                                               Assign To <sup class="text-danger">*</sup></label>
                                           <select class="form-control" name='Assign' #Assign='ngModel'
                                           [ngClass]="{'clearance': TaskSubmitted &&  Assign?.errors?.required}"
                                           [(ngModel)]="ObjTask.User_ID" required>
                                               <option [ngValue]="undefined">Select</option>
                                               <option *ngFor="let option of AssignToList" [ngValue]="option.User_ID">{{option.Name}}</option>
                                           </select>
                                       </div>
                                       <div class="col-sm-4">
                                           <label class="control-label">Status<sup class="text-danger">*</sup></label>
                                           <select class="form-control" 
                                           [ngClass]="{'clearance':TaskSubmitted && Status?.errors?.required}"
                                           name="Status"
                                           #Status="ngModel"
                                           [(ngModel)]="ObjTask.Task_Status"
                                           required>
                                               <option [ngValue]="undefined">Select</option>
                                               <option value="Not Started">Not Started</option>
                                               <option value="In Progress">In Progress</option>
                                               <option value="Completed">Completed</option>
                                           </select>
                                       </div>
                                   </div>
                               </fieldset>
                           </form>
                       </div>
                   </div>
               </div>
           </div>
       </div>
    
       <p-footer>
           <button type="button" (click)="CloseTaskEditModal()" class="btn btn-default">
               CLOSE
           </button>
           <button type="button" class="btn btn-primary pull-right"  [disabled]="TaskSubmitSpinner || TaskDisabledFlag" (click)="UpdateTask(TaskEditModalUpdate.form.valid)">
               <p-progressSpinner
               *ngIf="TaskSubmitSpinner"
               [style]="{ width: '15px', height: '15px' }"
               strokeWidth="8"
               animationDuration=".5s"
             ></p-progressSpinner> <i class="fa fa-fw  fa-save"></i>&nbsp;SAVE
           </button>
           
       </p-footer>
   </p-dialog>